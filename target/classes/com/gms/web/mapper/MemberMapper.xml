<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.gms.web.mapper.MemberMapper">
	<select id="countMembers" resultType="string">
	 select count(*) as count from member
	</select>
	<select id="login" resultType="com.gms.web.member.MemberDTO" parameterType="com.gms.web.command.CommandDTO">
	 Select member_id AS id , name, password, ssn, regdate, phone, email, profile FROM member WHERE member_id=#{search}
	</select>
	<select id="selectAll" resultType="com.gms.web.member.StudentDTO" parameterType="com.gms.web.command.CommandDTO">
	select c.* 
		from (select @rnum := @rnum +1 as num, t.* 
			  from student t, (select @rnum := 0) b ) c
		where c.num between #{startRow} and #{endRow}
	</select>
	<select id="selectByName" resultType="com.gms.web.member.StudentDTO" parameterType="com.gms.web.command.CommandDTO">
	select t2.*
		from (select @rnum := @rnum +1 as num, s.*
			  from student s, (select @rnum := 0) b 
			  where name like '%${search}%' 
			  order by num desc) t2  
		
	</select>
</mapper>